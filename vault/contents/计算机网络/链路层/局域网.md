---
created_at: 2024-07-24
modified_at: 2024-07-24
description: 
aliases: 
tags:
  - 计算机网络
title: 局域网
---
## 特点
...
## 决定要素
- 网络拓扑
- 传输介质
- **介质访问控制方法**
## 网络拓扑结构
- 星形
- 总线型
- 环形
- 树形
## 传输介质
- 有线局域网
    - 双绞线
    - 同轴电缆
    - 光纤
- 无线局域网
    - 电磁波
## 介质访问控制协议
- CSMA/CD 用于总线网
- 令牌总线协议 用于总线网
- 令牌环协议 用于环形网
## MAC子层和LLC子层
### MAC
介质访问控制子层，即前面[[差错控制]]、[[组帧]]与[[介质访问控制]]部分提及的内容，向上层屏蔽对物理层访问的差异
### LLC
逻辑链路控制子层，为网络层提供服务，实际上作用不大
- 无确认无连接、 面向连接、带确认无连接
- 高速传送
- 差错控制
- 给帧加序号
## 协议

| 协议              | 物理拓扑 | 逻辑拓扑 | 标准             |
| --------------- | ---- | ---- | -------------- |
| 以太网             | 星形   | 总线   | IEEE802.**3**  |
| 令牌环             | 星形   | 环形   | IEEE802.5      |
| FDDI（光纤分布式数字接口） | 双环   | 环形   | IEEE802.8      |
| WLAN            | -    | -    | IEEE802.**11** |
## 以太网
### 标准变迁
第一个版本是DIX V1, 之后修改为DIX Ethernet V2，在此基础上制订了IEEE802.**3**
### 介质访问控制协议
以太网使用CSMA/CD，提供**无连接、不可靠**的连接服务、采用**曼彻斯特编码**来发送数据
### 不同规格的传输介质与拓扑结构

|        | 10BASE-5      | 10BASE-2    | 10BASE-**T**             | 10BASE-**F**    |
| ------ | ------------- | ----------- | ------------------------ | --------------- |
| 介质     | 同轴线缆          | 同轴线缆        | T代表**Twisted Pair**,即双绞线 | F代表**Fiber**即光纤 |
| 带宽     | 10Mbps        | 10Mbps      | 10Mbps                   | 10Mbps          |
| 编码     | 曼彻斯特编码        | 曼彻斯特编码      | 曼彻斯特编码                   | 曼彻斯特编码          |
| 拓扑     | 总线            | 总线          | 星                        | 点对点             |
| 最大段长   | 500m，对应规格结尾的5 | 185对应规格结尾的2 | 100m                     | 2000m           |
| 最多节点数量 | 100           | 30          | 2                        | 2               |
10指传输速率，单位为mbps，BASE指基带以太网，F代表**Fiber**即光纤，规格结尾的5代表最大段长500m，2代表最大段长185米
### 以太网卡
- 网卡实现的功能主要位于物理层和数据链路层
- 每个网卡之间使用**曼彻斯特机制**来进行同步
- 以太网卡具有的独一无二的标识，称为[[mac地址]]
### 以太网帧
![Pasted image 20240725172946](https://r2.pipago360.site/pupahub/2024/09/f9065d5059225b66b675070511fa114c.png)
- 前导码：不属于MAC帧，用于标识MAC开始
- MAC帧：
	- 目的地址、源地址：均为MAC地址，用6个十六进制数表示的48位二进制数
	- 类型：指示网络层的协议类型，是网络层的访问服务点
	- 数据：**46-1500字节**
		- **46**  $64-(6+6+2+4)=46$
		- 1500 **MTU**
	- FCS: [[差错控制#CRC编码|CRC循环冗余校验]]
### 争用期与最短帧
[[介质访问控制#争用期]]
### MTU
链路层数据帧**可封装数据（不包括帧头与帧尾）** 的上限。以太网的MTU是B。
## 高速以太网

| 规格       | 100BASE-T | 吉比特以太网      | 10吉比特以太网 |
| -------- | --------- | ----------- | -------- |
| 介质       | 屏蔽双绞线     | 光纤、双绞线（5类线） | 光纤       |
| 速率       | 100mbps   | 1gbps       | 10gbps   |
| 通信方式     | 半双工或全双工   | 半双工或全双工     | 全双工      |
| 介质访问控制协议 | csma/cd   | csma/cd     | 无        |
**100BASE-T保持最短帧长64B不变，但将一个网段的长度缩短到100m,帧间最短间隔由$9.6 \mu s$变为$0.96 \mu s$**
## 无线局域网
- 有固定基础设施的无线局域网
    - 每台设备通过AP组成一个**基本服务集（BSS）**
    - AP之间通过**主干分配系统（DS）** 相连接，构成**扩展服务集（ESS）**
- 无固定基础设施的无线局域网
    - 设备之间自由组网，保持在一个网段内，没有AP等设备
### 标准
ieee802.**11**
### 帧头格式
![Pasted image 20240725175105](https://r2.pipago360.site/pupahub/2024/09/a7b7290521c3e70fd6c8a90cdf218cd0.png)

| 去往ap | 来自ap | addr1 | addr2 | addr3 | addr4 |
| ---- | ---- | ----- | ----- | ----- | ----- |
| 0    | 1    | 目的地址  | ap地址  | 源地址   | -     |
| 1    | 0    | ap地址  | 源地址   | 目标地址  | -     |
## VLAN
- 将局域网内的设备划分成与物理位置无关的逻辑组的技术
- VLAN是通过软件的方式实现的，因此节点的位置不受物理位置的限制
- 每个VLAN是一个**单独的广播域/不同的子网**
### 实现
- 基于接口：交换机中除了转发表，还存在一张VLAN表，记录了各个端口号和它对应的VLAN号
- 基于MAC地址：VALN表中记录的是各个MAC地址和它对应的VLAN号
- 基于IP地址：可以进行跨路由器扩展
### VLAN通信
将帧上附加相应的VLAN标签
### 优点
- 有效的共享资源
- 优化管理
- 提高了安全性
### IEEE 802.1Q帧
![Pasted image 20240725180633](https://r2.pipago360.site/pupahub/2024/09/59c1200aefffd4a113af6926629fc1c8.png)
- VLAN标记共4个字节
    - 前两个字节表明这是一个IEEE802.1Q帧
    - 之后4位无用
    - 后12位是**VLAN标识符VID**
- **802.1Q帧是由交换机处理的，主机和交换机间交换的就是普通的MAC帧**
## 其他
### IEEE相关标准注意区分
- [[#以太网]] ieee802.**3**
- [[#无线局域网|wlan]] ieee802.**11**
- [[#IEEE 802.1Q帧|vlan]] ieee802.**1q**