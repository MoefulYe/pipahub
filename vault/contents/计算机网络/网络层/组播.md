---
created_at: 2024-07-28
modified_at: 2024-07-28
description: 
aliases: 
tags:
  - 计算机网络
title: 组播
---
## 概念
- 一对多传输数据
- 网络中有多个用户需要数据
- 组播发送者仅发送一次
- 数据到达离用户尽可能近的节点处再进行复制和分发
## IP组播地址
- IP组播地址让源设备能够将分组发送给一组设备
- 属于多播组的设备将被分配一个组播组IP地址
- [[ipv4#分类的地址|范围]]
- 组播地址只能作为目标地址 
- 对组播数据包不回应[[icmp#不应发送ICMP差错报告报文的几种情况|ICMP]]报文
- **尽力而为交付** 仅应用于**UDP**
- 可分为两种
	- 局域网内~
	- 互联网内~
## MAC组播
同单播地址一样，组播IP地址也需要相应的组播MAC地址在本地网络中实际传送帧。
- 组播MAC地址以十六进制值**01-00-5E打头**
- 余下的6个十六进制位是根据IP组播组地址的**最后23位**转换得到
- TCP/IP协议使用的以太网多播地址的范围是：从**01-00-5E-00-00-00**到**01-00-5E-7F-FF-FF**
![Pasted image 20240728204348](https://r2.pipago360.site/pupahub/2024/09/b69e39d726b5392592ec1cc6f3639011.png)ip组播地址到mac组播地址的映射
由于有5位舍弃不用，可能会导致有不同的组播地址映射为了相同的MAC地址，需要在IP层进行过滤，舍弃掉不是本机需要的部分。（有点类似于缓存项的标记位）
## IGMP Internet Group Manage Protocol
IGMP协议让路由器知道本局域网上**是否有主机（的进程）参加或退出了某个组播组**。
- IGMP不知道本局域网有几台参加组播组的设备
- IGMP不知道参见组播组设备的位置
### IGMP工作流程
- 某主机要加入组播组
    1. 该主机向组播组的组播地址发送一个IGMP报文， 声明自己要称为该组的成员
    2. 本地组播路由器收到IGMP报文后，利用组播路由选择协议把这组成员关系发给因特网上的其他组播路由器
- 本地组播路由器周期性探询本地局域网上的主机，以便知道这些主机是否还是组播组的成员
    - 有一个主机对某个组响应
        - 组播路由器就认为这个组是活跃的
        - 其他主机（若存在）不再发送对探询的响应
    - 经过几次探询后没有一个主机响应
        - 组播路由器就认为本网络上的没有此组播组的主机
        - 后续不再把这组的成员关系发给其他的组播路由器
## 组播路由选择协议
组播路由选择协议目的是找出以源主机为根节点的**组播转发树**（树形结构能够防止路由环路）。
### 算法
- 基于链路状态的路由选择
- 基于距离-向量的路由选择
- 协议无关的组播（稀疏/密集）：即组播组之间的距离远近